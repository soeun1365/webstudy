<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>네이버 : 회원가입</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
	<link rel="stylesheet" href="../styles/join.css">
</head>
<body>
    <div class="container">
        <!-- 네이버로고 -->
        <header>
            <h1></h1>
        </header>
        <!-- 본문양식 -->
        <section>
            <!-- 회원가입폼 -->
            <form name="join_form" method="post">
                <!-- 아이디label,input -->
                <div class="join_row">
                    <!-- 아이디label -->
                    <h3 class="join_title">
                        <label for="id">아이디</label>
                    </h3>
                    <!-- 아이디input상자 -->
                    <div class="ps_box">
                        <input type="text" id="id" class="int" name="id">
                        <span class="step_url">@naver.com</span>
                    </div>
                    <!-- 아이디체크결과 -->
                    <p id="id_check"></p>
                </div>
                <!-- 비밀번호label,input -->
                <div class="join_row">
                    <!-- 비밀번호label -->
                    <h3 class="join_title">
                        <label for="pwd">비밀번호</label>
                    </h3>
                    <!-- 비밀번호input상자 -->
                    <div class="ps_box">
                        <input type="password" id="pwd" class="int" name="pwd">
                        <span class="step_url"><i class="fas fa-unlock"></i></span>
                    </div>
                    <!-- 비밀번호체크결과 -->
                    <p id="pwd_check"></p>
                </div>
                <!-- 비밀번호재확인label,input -->
                <div class="join_row">
                    <!-- 비밀번호재확인label -->
                    <h3 class="join_title">
                        <label for="re_pwd">비밀번호 재확인</label>
                    </h3>
                    <!-- 비밀번호재확인input상자 -->
                    <div class="ps_box">
                        <input type="password" id="re_pwd" class="int" name="re_pwd">
                        <span class="step_url"><i class="far fa-check-circle"></i></span>
                    </div>
                    <!-- 비밀번호재확인체크결과 -->
                    <p id="re_pwd_check"></p>
                </div>
                <br>
                <!-- 이름label,input -->
                <div class="join_row">
                    <!-- 이름label -->
                    <h3 class="join_title">
                        <label for="name">이름</label>
                    </h3>
                    <!-- 이름input상자 -->
                    <div class="ps_box no_padding_ps_box">
                        <input type="text" id="name" class="int" name="name">
                    </div>
                    <!-- 이름체크결과 -->
                    <p id="name_check" class="check_fail"></p>
                </div>
                <!-- 생년월일label,input,select -->
                <div class="join_row">
                    <!-- 생년월일label -->
                    <h3 class="join_title">
                        <label for="yyyy">생년월일</label>
                    </h3>
                    <!-- 년,월,일input상자 -->
                    <div class="yyyymmdd">
                        <div class="ps_box ps_box2 no_padding_ps_box">
                            <input type="text" maxlength="4" id="yyyy" class="int int2" name="yyyy" placeholder="년(4자)">
                        </div>
                        <div class="ps_box ps_box2 no_padding_ps_box">    
                            <select id="mm" class="int int2" name="mm">
                                <option value="">월</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                                <option value="6">6</option>
                                <option value="7">7</option>
                                <option value="8">8</option>
                                <option value="9">9</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
                        </div>
                        <div class="ps_box ps_box2 no_padding_ps_box">    
                            <input type="text" maxlength="2" id="dd" class="int int2" name="dd" placeholder="일">
                        </div>
                    </div>
                    <!-- 생년월일체크결과 -->
                   	<p id="birth_check" class="check_fail"></p>
                </div>
                <!-- 성별label,input -->
                <div class="join_row">
                    <!-- 성별label -->
                    <h3 class="join_title">
                        <label for="gender">성별</label>
                    </h3>
                    <!-- 성별input상자 -->
                    <div class="ps_box no_padding_ps_box">
                        <select id="gender" name="gender" class="int">
                            <option value="">성별</option>
                            <option value="male">남자</option>
                            <option value="female">여자</option>
                            <option value="unisex">선택 안함</option>
                        </select>
                    </div>
                    <!-- 성별체크결과 -->
                   	<p id="gender_check" class="check_fail"></p>
                </div>
                <!-- 본인확인이메일(선택)label,input -->
                <div class="join_row">
                    <!-- 본인확인이메일(선택)label -->
                    <h3 class="join_title">
                        <label for="email">본인 확인 이메일<span class="term_choice">(선택)</span></label>
                    </h3>
                    <!-- 본인확인이메일(선택)input상자 -->
                    <div class="ps_box no_padding_ps_box">
                        <input type="text" id="email" class="int" name="email">
                    </div>
                    <!-- 본인확인이메일(선택)체크결과 -->
                   	<p id="email_check" class="check_fail"></p>
                </div>
                <br>
                <div class="join_row">
                    <!-- 휴대전화label -->
                    <h3 class="join_title">
                        <label for="mobile1">휴대전화</label>
                    </h3>
                    <!-- 휴대전화input상자 -->
                    <div class="ps_box no_padding_ps_box">
                        <select name="mobile1" class="int">
                            <option value="가나">가나 +233</option>
                            <option value="대한민국" selected>대한민국 +82</option>
                            <option value="홍콩">홍콩 +852</option>
                        </select>
                    </div>
                    <!-- 전화번호입력,인증번호받기 -->
                    <div class="int_mobile_area">
                        <div class="ps_box no_padding_ps_box">
                            <input type="text" id="mobile2" class="int int2" name="mobile2" placeholder="전화번호 입력">
                        </div>
                        <a href="#" class="btn_verify btn_primary" id="btn_send">인증번호 받기</a>
                    </div>
                    <!-- 인증번호를 입력하세요 -->
                    <div class="ps_box no_padding_ps_box ps_box_disable">
                        <input type="text" id="auth" class="int" name="auth" placeholder="인증번호 입력하세요">
                    </div>
                    <!-- 휴대전화체크결과 -->
                   	<p id="mobile2_check"></p>
                </div>
                <!-- 가입하기버튼 -->
                <div class="btn_area">
                    <!-- submit을 수행하는 button태그 -->
                    <button id="btn_join" class="btn_type btn_primary">가입하기</button>
                </div>
            </form>
        </section>
        <!-- 아래2줄 -->
        <footer>
            <p class="naver-info">
                <a>이용약관</a> | <a><strong>개인정보처리방침</strong></a> | <a>책임의 한계와 법적고지</a> | <a>회원정보 고객센터</a>
            </p>
            <div class="company-info">
                <div class="small-naver-logo"></div>
                <div>Copyright &copy; <strong>NAVER Corp.</strong> All Rights Reserved.</div>
            </div>
        </footer>
    </div>
    
    <script>
    
    	let id = document.getElementById('id');
   		let idCheck = document.getElementById('id_check');
   		let regID = /^[a-z0-9][a-z0-9_-]{4,19}$/;
    	id.addEventListener('blur', function(){
    		fn_idCheck();
    	});
    	function fn_idCheck() {
    		let ret = false;
    		if (id.value == '') {
    			idCheck.textContent = '필수 정보입니다.';
    			idCheck.setAttribute('class', 'check_fail');
    		} else {
				if (regID.test(id.value)) {
					idCheck.textContent = '멋진 아이디네요!';
					idCheck.setAttribute('class', 'check_pass');
					ret = true;
				} else {
					idCheck.textContent = '5~20자의 영문 소문자, 숫자와 특수기호(_),(-)만 사용 가능합니다.';
					idCheck.setAttribute('class', 'check_fail');
				}
    		}
    		return ret;
    	}
    	
    	let pwd = document.getElementById('pwd');
    	let icon = document.querySelector('#pwd + span');
    	let pwdCheck = document.getElementById('pwd_check');
		let regPWD = /^(?=.*[A-Z])(?=.*[a-z])(?=.*[0-9])(?=.*[`~!@#$%^&*])[A-Za-z0-9`~!@#$%^&*]{4,16}$/;
    	pwd.addEventListener('blur', function(){
    		fn_pwdCheck();
    	});
    	function fn_pwdCheck() {
    		let ret = false;
    		if (pwd.value == '') {
    			icon.setAttribute('class', 'step_url check_fail');
    			pwdCheck.textContent = '필수 정보입니다.';
    			pwdCheck.setAttribute('class', 'check_fail');
    		} else {
    			if (regPWD.test(pwd.value)) {
    				icon.setAttribute('class', 'step_url check_pass');
    				pwdCheck.textContent = '';
    				ret = true;
    			} else {
    				icon.setAttribute('class', 'step_url check_fail');
    				pwdCheck.textContent = '8~16자 영문 대 소문자, 숫자, 특수문자를 사용하세요.';
    				pwdCheck.setAttribute('class', 'check_fail');
    			}
    		}
    		return ret;
    	}
    	
    	let rePwd = document.getElementById('re_pwd');
    	let reIcon = document.querySelector('#re_pwd + span');
    	let rePwdCheck = document.getElementById('re_pwd_check');
    	rePwd.addEventListener('blur', function(){
    		fn_rePwdCheck();
    	});
    	function fn_rePwdCheck(){
    		let ret = false;
    		if (rePwd.value == '') {
    			reIcon.setAttribute('class', 'step_url');
    			rePwdCheck.textContent = '필수 정보입니다.';
    			rePwdCheck.setAttribute('class', 'check_fail');
    		} else if (rePwd.value == pwd.value) {
    			reIcon.setAttribute('class', 'step_url check_pass');
    			rePwdCheck.textContent = '';
    			ret = true;
    		} else {
    			reIcon.setAttribute('class', 'step_url');
    			rePwdCheck.textContent = '비밀번호가 일치하지 않습니다.';
    			rePwdCheck.setAttribute('class', 'check_fail');
    		}
    		return ret;
    	}
    	
    	let name = document.getElementById('name');
    	let nameCheck = document.getElementById('name_check');
		let regName = /^[가-힣a-zA-Z]+$/;
    	name.addEventListener('blur', function(){
    		fn_nameCheck();
    	});
    	function fn_nameCheck(){
    		let ret = false;
    		if (name.value == '') {
    			nameCheck.textContent = '필수 정보입니다.';
    		} else {
    			if (regName.test(name.value)) {
    				nameCheck.textContent = '';
    				ret = true;
    			} else {
    				nameCheck.textContent = '한글과 영문 대 소문자를 사용하세요. (특수기호, 공백 사용 불가)';
    			}
    		}
    		return ret;
    	}
    	
    	let yyyy = document.getElementById('yyyy');
    	let mm = document.getElementById('mm');
    	let dd = document.getElementById('dd');
    	let birthCheck = document.getElementById('birth_check');
    	yyyy.addEventListener('blur', function(){
    		fn_birthdayCheck();
    	});
    	mm.addEventListener('blur', function(){
    		fn_birthdayCheck();
    	});
    	dd.addEventListener('blur', function(){
    		fn_birthdayCheck();
    	});
    	function fn_birthdayCheck() {
    		let ret = false;
    		if (yearCheck() && monthCheck() && dayCheck()) {
    			birthCheck.textContent = '';
    			ret = true;
    		}
    		return ret;
    	}
    	function yearCheck() {
    		let ret = false;
    		if (yyyy.value.length < 4) {
    			birthCheck.textContent = '태어난 년도 4자리를 정확하게 입력하세요.';
    		} else {
    			let nowYear = new Date().getFullYear();
    			if (nowYear - yyyy.value >= 100) {
    				birthCheck.textContent = '정말이세요?';
    			} else if (nowYear < yyyy.value) {
	    			birthCheck.textContent = '미래에서 오셨군요. ^^';   				
    			} else {
    				ret = true;
    			}
    		}
    		return ret;
    	}
    	function monthCheck() {
    		let ret = false;
    		if (mm.value == '') {
    			birthCheck.textContent = '태어난 월을 선택하세요.';
    		} else {
    			ret = true;
    		}
    		return ret;
    	}
    	function dayCheck() {
    		let ret = false;
    		let endDays = [0, 31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
    		if (dd.value == '' || dd.value > endDays[mm.value]) {
    			birthCheck.textContent = '태어난 일(날짜) 2자리를 정확하게 입력하세요.';
    		} else {
    			ret = true;
    		}
    		return ret;
    	}
    	
    	let gender = document.getElementById('gender');
    	let genderCheck = document.getElementById('gender_check');
    	gender.addEventListener('blur', function(){
    		fn_genderCheck();
    	});
    	function fn_genderCheck() {
    		let ret = false;
    		if (gender.value == '') {
    			genderCheck.textContent = '필수 정보입니다.';
    		} else {
    			genderCheck.textContent = '';
    			ret = true;
    		}
    		return ret;
    	}
    	
    	let email = document.getElementById('email');
    	let emailCheck = document.getElementById('email_check');
    	let regEmail = /^[a-z0-9][a-z0-9_-]*@[a-zA-Z0-9]+([.][a-zA-Z]{2,}){1,2}$/;
    	email.addEventListener('blur', function(){
    		fn_emailCheck();
    	});
    	function fn_emailCheck() {
    		let ret = false;
    		if (email.value == '' || regEmail.test(email.value)) {
    			emailCheck.textContent = '';
    			ret = true;
    		} else {
    			emailCheck.textContent = '이메일 주소를 다시 확인해주세요.';
    		}
    		return ret;
    	}
    	
    	let mobile2 = document.getElementById('mobile2');
    	let mobile2Check = document.getElementById('mobile2_check');
    	let btnSend = document.getElementById('btn_send');
    	let regMobile2 = /^010[0-9]{8}$/;
    	btnSend.addEventListener('click', function(){
    		fn_mobile2Check();
    	});
    	function fn_mobile2Check() {
    		let ret = false;
    		mobile2.value = mobile2.value.split('-').join('');  // 모든 하이픈(-) 제거
    		/*
    			mobile2.value = '010-1234-5678'
    			mobile2.value.split('-') : ['010', '1234', '5678']
    			mobile2.value.split('-').join('') : '01012345678'
    		*/
    		if (regMobile2.test(mobile2.value)) {
    			mobile2Check.innerHTML = '인증번호를 발송했습니다.(유효시간 30분)<br>인증번호가 오지 않으면 입력하신 정보가 정확한지 확인하여 주세요.<br>이미 가입된 번호이거나, 가상전화번호는 인증번호를 받을 수 없습니다.';
    			mobile2Check.setAttribute('class', 'check_pass');
    			ret = true;
    		} else {
    			mobile2Check.textContent = '형식에 맞지 않는 번호입니다.';
    			mobile2Check.setAttribute('class', 'check_fail');
    		}
    		return ret;
    	}

    	// button 태그를 클릭하면, 폼이 서브밋되므로 폼의 submit 이벤트로 작성해도 된다.
    	// document.getElementById('btn_join').addEventListener('click', function(){});
    	
    	document.forms.join_form.addEventListener('submit', function(event){
    		if (fn_idCheck() &&
    			fn_pwdCheck() &&
    			fn_rePwdCheck() &&
    			fn_nameCheck() &&
    			fn_birthdayCheck() &&
    			fn_genderCheck() &&
    			fn_emailCheck() &&
    			fn_mobile2Check()) {
    			if(confirm('가입할까요?')) {
    				alert('가입되었습니다.');
    				return true;
    			} else {
    				event.preventDefault();
        			return false;
    			}
    		} else {
    			event.preventDefault();
    			return false;
    		}
    	});

    </script>
    
</body>
</html>