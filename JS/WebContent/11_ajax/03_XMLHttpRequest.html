<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script>
		/* 
			비동기 통신을 위한 onreadystatechange 이벤트 속성
			1. 통신의 각 진행단계를 확인하는 이벤트 속성이다.
			2. 비동기 통신의 필수 이벤트이다.
			3. readyState와 status를 확인한다.
			4. readyState
				1) 0: XMLHttpRequest.UNSEND
				2) 1: XMLHttpRequest.OPENED
				3) 2: XMLHttpRequest.HEADERS_RECEIVE
				4) 3: XMLHttpRequest.LOADING
				5) 4: XMLHttpRequest.DONE		-->   성공했을 때
			5. status
				1) 1xx(백번대)	: 요청하고, 서버가 작업 중인 경우 
				2) 2xx(이백번대)	: 서버가 정상적으로 응답한 경우
				3) 3xx(삼백번대)	: 리다이렉트가 필요한 경우
				4) 4xx(사백번대)	: 요청이 잘못된 경우(404 이것은 자주 본케이스)
				5) 5xx(오백번대)	: 서버에 오류가 발생한 경우
		*/
		onload = function(){
			//XMLHttpRequest 객체생성
			var request  = new XMLHttpRequest();
			
			//2. open()
			request.open('get', 'data.txt', 'true');	//true는 비동기 통신이다.
			
			//3. send()
			request.send();
			
			//지금부터 서버가 응답했는지 계속 체크할 수 있는 readystatechange 이벤트를 처리한다.
			request.onreadystatechange  = function(){
				if(request.readyState == 4 && request.status == 200){	// 서버가 정상적으로 응답한 상태
					document.getElementById('receive').textContent = request.responseText;
				}
			}
		}
	</script>
</head>
<body>
	<h1>서버가 보내준 데이터</h1>
	<div id = "receive">
	</div>
</body>
</html>